<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸŒ¸ Malla Curricular AdministraciÃ³n PÃºblica ðŸŒ¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background: linear-gradient(to bottom right, #f9f6ff, #fef1ff);
      color: #5a4a7a;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-size: 2em;
      color: #9b71c7;
      margin-bottom: 5px;
    }
    h2 {
      font-weight: normal;
      color: #b68cd2;
      font-size: 1.2em;
      margin-top: 0;
      margin-bottom: 20px;
    }
    #creditos {
      font-weight: bold;
      font-size: 1.2em;
      background-color: #fbe4ff;
      display: inline-block;
      padding: 10px 18px;
      border-radius: 20px;
      color: #7b4992;
      box-shadow: 0 0 6px rgba(157, 102, 173, 0.2);
    }
    #cursos-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }
    .curso {
      width: 260px;
      margin: 10px;
      padding: 15px;
      background: #fceeff;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      color: #6d4e9d;
      font-weight: 600;
      user-select: none;
    }
    .curso:hover:not(.bloqueado):not(.aprobado) {
      background: #efd6ff;
      transform: translateY(-3px);
    }
    .curso.aprobado {
      background: #d7f5e6;
      color: #3a785f;
      text-decoration: line-through;
      cursor: default;
    }
    .curso.bloqueado {
      background: #f3f0f7;
      color: #b6a7c6;
      cursor: not-allowed;
    }
    #logout-btn {
      margin-top: 30px;
      padding: 12px 30px;
      background: #fbcfe8;
      border: none;
      border-radius: 25px;
      color: #6c4072;
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      transition: background 0.3s;
    }
    #logout-btn:hover {
      background: #f9a8d4;
    }
    #mensaje-desbloqueo {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #fef3ff;
      color: #7c3aed;
      padding: 12px 24px;
      border-radius: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      font-weight: 600;
      font-size: 1em;
      z-index: 1000;
      transition: opacity 0.3s ease;
      display: none;
      user-select: none;
    }
  </style>
</head>
<body>

  <h1>ðŸŒ¸ Malla Curricular de AdministraciÃ³n PÃºblica ðŸŒ¸</h1>
  <h2>Modo diplomacia activado ( ï½¡â€¢Ì€á´—-)âœ§</h2>
  <div id="creditos">CrÃ©ditos Aprobados: 0</div>
  <div id="cursos-container"></div>
  <button id="logout-btn">Cerrar SesiÃ³n ðŸšª</button>
  <div id="mensaje-desbloqueo">ðŸŽ‰ Â¡Nuevo curso desbloqueado! ðŸ“š</div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <script>
    // ConfiguraciÃ³n Firebase (revisa que sea igual que en consola)
    const firebaseConfig = {
      apiKey: "AIzaSyAxzAJVTV6ioXf0wnyAx2s1-k9-I83xjB0",
      authDomain: "malla-interactiva-ap.firebaseapp.com",
      projectId: "malla-interactiva-ap",
      storageBucket: "malla-interactiva-ap.appspot.com",
      messagingSenderId: "982790383608",
      appId: "1:982790383608:web:0c0100d098ba1713df580d",
      measurementId: "G-D8F2168ZB3"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const cursos = [
      { nombre: "MatemÃ¡tica para la GestiÃ³n I", prerrequisitos: [], creditos: 8 },
      { nombre: "IntroducciÃ³n a la GestiÃ³n PÃºblica", prerrequisitos: [], creditos: 8 },
      { nombre: "Historia de las Instituciones PolÃ­ticas", prerrequisitos: [], creditos: 8 },
      { nombre: "TecnologÃ­as y Sistemas de InformaciÃ³n", prerrequisitos: [], creditos: 8 },
      { nombre: "Bases JurÃ­dicas para la AdministraciÃ³n", prerrequisitos: [], creditos: 8 },
      { nombre: "InglÃ©s I", prerrequisitos: [], creditos: 6 },
      { nombre: "Curso Libre I", prerrequisitos: [], creditos: 8 },
      { nombre: "MatemÃ¡tica para la GestiÃ³n II", prerrequisitos: ["MatemÃ¡tica para la GestiÃ³n I"], creditos: 8 },
      { nombre: "EvoluciÃ³n y Complejidad de la AdministraciÃ³n", prerrequisitos: ["IntroducciÃ³n a la GestiÃ³n PÃºblica"], creditos: 8 },
      { nombre: "Ideas y Debates PolÃ­ticos ContemporÃ¡neos", prerrequisitos: [], creditos: 8 },
      { nombre: "EpistemologÃ­a de las Ciencias Sociales", prerrequisitos: [], creditos: 8 },
      { nombre: "Marco Normativo I", prerrequisitos: ["Bases JurÃ­dicas para la AdministraciÃ³n"], creditos: 8 },
      { nombre: "InglÃ©s II", prerrequisitos: ["InglÃ©s I"], creditos: 6 },
      { nombre: "Curso Libre II", prerrequisitos: ["Curso Libre I"], creditos: 8 },
      { nombre: "EstadÃ­stica para la GestiÃ³n I", prerrequisitos: ["MatemÃ¡tica para la GestiÃ³n II"], creditos: 8 },
      { nombre: "Comportamiento Humano en la OrganizaciÃ³n", prerrequisitos: ["EvoluciÃ³n y Complejidad de la AdministraciÃ³n"], creditos: 8 },
      { nombre: "FenÃ³menos PolÃ­ticos", prerrequisitos: ["Ideas y Debates PolÃ­ticos ContemporÃ¡neos"], creditos: 8 },
      { nombre: "MicroeconomÃ­a para la GestiÃ³n PÃºblica", prerrequisitos: ["MatemÃ¡tica para la GestiÃ³n II"], creditos: 8 },
      { nombre: "Marco Normativo II", prerrequisitos: ["Marco Normativo I"], creditos: 8 },
      { nombre: "MÃ©todos Cualitativos", prerrequisitos: ["EpistemologÃ­a de las Ciencias Sociales"], creditos: 8 },
      { nombre: "PolÃ­tica Internacional", prerrequisitos: ["FenÃ³menos PolÃ­ticos"], creditos: 8 },
      { nombre: "DiseÃ±o Organizacional", prerrequisitos: ["Comportamiento Humano en la OrganizaciÃ³n"], creditos: 8 },
      { nombre: "MÃ©todos Cuantitativos", prerrequisitos: ["EstadÃ­stica para la GestiÃ³n I"], creditos: 8 },
      { nombre: "Planeamiento EstratÃ©gico", prerrequisitos: ["DiseÃ±o Organizacional"], creditos: 8 },
      { nombre: "GestiÃ³n Financiera PÃºblica", prerrequisitos: ["MicroeconomÃ­a para la GestiÃ³n PÃºblica"], creditos: 8 },
      { nombre: "NegociaciÃ³n y ResoluciÃ³n de Conflictos", prerrequisitos: ["Comportamiento Humano en la OrganizaciÃ³n"], creditos: 8 },
      { nombre: "Ciclo y EvaluaciÃ³n de PolÃ­ticas PÃºblicas", prerrequisitos: ["Planeamiento EstratÃ©gico"], creditos: 8 },
      { nombre: "Contabilidad Gubernamental", prerrequisitos: ["GestiÃ³n Financiera PÃºblica"], creditos: 8 },
      { nombre: "GestiÃ³n de Personas", prerrequisitos: ["DiseÃ±o Organizacional"], creditos: 8 },
      { nombre: "GestiÃ³n de Proyectos", prerrequisitos: ["Planeamiento EstratÃ©gico"], creditos: 8 },
      { nombre: "Electivo I", prerrequisitos: [], creditos: 8 },
      { nombre: "AnÃ¡lisis EmpÃ­rico de PolÃ­ticas", prerrequisitos: ["MÃ©todos Cuantitativos", "MÃ©todos Cualitativos"], creditos: 8 },
      { nombre: "Electivo II", prerrequisitos: ["Electivo I"], creditos: 8 },
      { nombre: "Electivo III", prerrequisitos: ["Electivo II"], creditos: 8 },
      { nombre: "Curso de FormaciÃ³n General", prerrequisitos: [], creditos: 8 },
      { nombre: "SimulaciÃ³n de AsesorÃ­a PolÃ­tica", prerrequisitos: ["GestiÃ³n de Proyectos"], creditos: 8 },
      { nombre: "PrÃ¡ctica Profesional", prerrequisitos: ["Ciclo y EvaluaciÃ³n de PolÃ­ticas PÃºblicas"], creditos: 12 },
      { nombre: "Examen de TÃ­tulo", prerrequisitos: ["AnÃ¡lisis EmpÃ­rico de PolÃ­ticas"], creditos: 12 }
    ];

    let creditos = 0;

    function mostrarMensajeDesbloqueo() {
      const mensaje = document.getElementById("mensaje-desbloqueo");
      mensaje.style.display = "block";
      mensaje.style.opacity = "1";
      setTimeout(() => {
        mensaje.style.opacity = "0";
        setTimeout(() => {
          mensaje.style.display = "none";
        }, 500);
      }, 2000);
    }

    function actualizarCursos() {
      const container = document.getElementById("cursos-container");
      container.innerHTML = "";

      cursos.forEach(curso => {
        const tieneTodosLosPrerrequisitos = curso.prerrequisitos.every(pr => {
          const c = cursos.find(curso2 => curso2.nombre === pr);
          return c && c.aprobado;
        });
        const estado = curso.aprobado ? 'aprobado' : (tieneTodosLosPrerrequisitos ? '' : 'bloqueado');

        const div = document.createElement("div");
        div.className = `curso ${estado}`;
        div.textContent = curso.nombre;

        if (estado === '') {
          div.addEventListener("click", () => {
            curso.aprobado = true;
            creditos += curso.creditos;
            document.getElementById("creditos").textContent = `CrÃ©ditos Aprobados: ${creditos}`;
            mostrarMensajeDesbloqueo();
            actualizarCursos();
          });
        }

        container.appendChild(div);
      });
    }

    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "index.html";
      } else {
        creditos = 0;
        cursos.forEach(c => c.aprobado = false);
        actualizarCursos();
      }
    });

    document.getElementById("logout-btn").addEventListener("click", () => {
      auth.signOut();
    });
  </script>
</body>
</html>
